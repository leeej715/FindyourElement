<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Day Master Traits Finder</title>
  <meta name="theme-color" content="#0b0c10" />
  <meta name="apple-mobile-web-app-capable" content="yes" />

  <style>
    :root{
      --bg:#0b0c10;
      --line:#2a2f4a;
      --text:#eaf0ff;
      --muted:#b8c4ff;
      --muted2:#94a3d6;
      --btn:#1b2140;
      --btn2:#10142a;
      --focus:#7aa2ff;
      --radius:18px;
      --ok:#72ffb0;
      --err:#ff8a8a;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 600px at 10% 0%, #121a3a 0%, transparent 55%),
        radial-gradient(1000px 500px at 90% 10%, #1b1340 0%, transparent 60%),
        var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Sans", "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }
    .wrap{ max-width: 920px; margin: 0 auto; padding: 18px 16px 28px; }
    .header{ display:flex; flex-direction: column; gap: 8px; margin: 10px 0 14px; }
    .title{
      font-size: clamp(22px, 5vw, 32px);
      font-weight: 950;
      letter-spacing: .2px;
      line-height: 1.1;
      margin:0;
      display:flex;
      align-items:baseline;
      gap:12px;
      flex-wrap:wrap;
    }
    .status{
      font-size: 12px;
      color: var(--muted2);
      font-weight: 850;
      border:1px solid var(--line);
      border-radius: 999px;
      padding: 6px 10px;
      background: rgba(0,0,0,.18);
    }
    .status.ok{ color: var(--ok); border-color: rgba(114,255,176,.35); }
    .subtitle{
      margin:0;
      color: var(--muted);
      line-height: 1.45;
      font-size: 14px;
    }

    .card{
      background: rgba(18,20,32,.92);
      border: 1px solid rgba(42,47,74,.75);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: 0 18px 45px rgba(0,0,0,.32);
      backdrop-filter: blur(6px);
    }

    .grid{ display:grid; gap: 12px; grid-template-columns: 1fr; }
    .grid.three{ grid-template-columns: 1.2fr 1fr 1fr; }
    @media (max-width: 520px){
      .grid.three{ grid-template-columns: 1fr; }
    }

    label{ display:block; font-size: 13px; color: var(--muted); margin: 2px 0 8px; }
    input[type="text"]{
      width:100%;
      padding: 14px 14px;
      border-radius: 14px;
      border: 1px solid rgba(42,47,74,.9);
      background: var(--btn2);
      color: var(--text);
      font-size: 16px;
      outline: none;
    }
    input[type="text"]:focus{
      border-color: var(--focus);
      box-shadow: 0 0 0 3px rgba(122,162,255,.20);
    }

    .actions{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 12px;
    }
    button{
      width:100%;
      padding: 14px 14px;
      border-radius: 14px;
      border: 1px solid rgba(42,47,74,.9);
      background: var(--btn);
      color: var(--text);
      font-size: 16px;
      font-weight: 950;
      cursor:pointer;
      touch-action: manipulation;
    }
    button.secondary{
      background: rgba(16,20,42,.55);
      font-weight: 850;
      color: var(--muted);
    }
    button:active{ transform: translateY(1px); }

    .result{
      margin-top: 14px;
      padding: 16px;
      border-radius: var(--radius);
      border: 1px dashed rgba(42,47,74,.9);
      background: rgba(16,20,42,.55);
      display:none;
    }
    .result.error{
      border-style: solid;
      border-color: rgba(255,138,138,.45);
      background: rgba(255,138,138,.08);
    }

    .topline{
      display:flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items:flex-start;
      justify-content: space-between;
    }
    .big{
      font-size: clamp(22px, 6vw, 36px);
      font-weight: 980;
      letter-spacing: .2px;
      margin:0;
      line-height: 1.05;
    }
    .mini{
      margin: 10px 0 0;
      font-size: 14px;
      color: var(--muted);
      font-weight: 850;
      line-height: 1.35;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 7px 11px;
      border-radius: 999px;
      border: 1px solid rgba(42,47,74,.9);
      background: rgba(0,0,0,.18);
      color: var(--muted);
      font-size: 13px;
      font-weight: 900;
      white-space: nowrap;
    }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; color: var(--text); }

    .traits{
      margin-top: 14px;
      display:grid;
      gap: 10px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 760px){
      .traits{ grid-template-columns: 1fr 1fr; }
    }
    .box{
      border: 1px solid rgba(42,47,74,.7);
      background: rgba(0,0,0,.14);
      border-radius: 14px;
      padding: 12px;
    }
    .box h3{
      margin:0 0 8px;
      font-size: 14px;
      letter-spacing:.2px;
      color: var(--muted);
      font-weight: 950;
    }
    ul{ margin:0; padding-left: 18px; }
    li{ margin: 6px 0; color: var(--text); }
    .note{
      margin-top: 12px;
      font-size: 12px;
      color: var(--muted2);
      line-height: 1.35;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="header">
      <h1 class="title">
        Day Master Traits Finder
        <span id="status" class="status">Status: Loading‚Ä¶</span>
      </h1>

      <p class="subtitle">
        Enter your birth date to find your Day Master (10 types), traits, and recommended careers.
      </p>
    </div>

    <div class="card">
      <div class="grid three">
        <div>
          <label for="birthYear">Year</label>
          <input id="birthYear" type="text" inputmode="numeric" autocomplete="bday-year" placeholder="YYYY" />
        </div>
        <div>
          <label for="birthMonth">Month</label>
          <input id="birthMonth" type="text" inputmode="numeric" autocomplete="bday-month" placeholder="MM" />
        </div>
        <div>
          <label for="birthDay">Day</label>
          <input id="birthDay" type="text" inputmode="numeric" autocomplete="bday-day" placeholder="DD" />
        </div>
      </div>

      <div class="actions">
        <button id="calcBtn" type="button">Search</button>
        <button id="resetBtn" class="secondary" type="button">Reset</button>
      </div>

      <div id="out" class="result"></div>

      <div class="note">
        Presentation-friendly summary (date only).
      </div>
    </div>
  </div>

<script>
(() => {
  const statusEl = document.getElementById("status");

  function setStatusOk(){
    statusEl.textContent = "Status: Ready";
    statusEl.classList.add("ok");
  }
  function setStatusErr(msg){
    statusEl.textContent = "Status: Error";
    statusEl.classList.remove("ok");
    console.error(msg);
  }

  try {
    const STEMS = ["Áî≤","‰πô","‰∏ô","‰∏Å","Êàä","Â∑±","Â∫ö","Ëæõ","Â£¨","Áô∏"];
    const BRANCHES = ["Â≠ê","‰∏ë","ÂØÖ","ÂçØ","Ëæ∞","Â∑≥","Âçà","Êú™","Áî≥","ÈÖâ","Êàå","‰∫•"];

    function mod(n, m){ return ((n % m) + m) % m; }

    // Gregorian date -> Julian Day Number at noon (integer)
    function jdnNoon(y, m, d){
      const a = Math.floor((14 - m) / 12);
      const y2 = y + 4800 - a;
      const m2 = m + 12 * a - 3;
      return d
        + Math.floor((153 * m2 + 2) / 5)
        + 365 * y2
        + Math.floor(y2 / 4)
        - Math.floor(y2 / 100)
        + Math.floor(y2 / 400)
        - 32045;
    }

    // T = 1 + mod(JD_noon - 1, 10)
    // B = 1 + mod(JD_noon + 1, 12)
    function dayPillarFromDate(y, m, d){
      const jd = jdnNoon(y, m, d);
      const T = 1 + mod(jd - 1, 10);
      const B = 1 + mod(jd + 1, 12);
      return { jd, stemIndex: T, branchIndex: B, pillar: STEMS[T-1] + BRANCHES[B-1] };
    }

    // Day Master label + emoji
    function dayMasterInfo(T){
      switch (T){
        case 1:  return { element:"Wood(Tree)",       emoji:"üå≥",  roman:"Jia",  han:"Áî≤Êú®", ko:"Í∞ëÎ™©" };
        case 2:  return { element:"Wood(Grass)",      emoji:"üåø",  roman:"Yi",   han:"‰πôÊú®", ko:"ÏùÑÎ™©" };
        case 3:  return { element:"Fire(Sun)",        emoji:"‚òÄÔ∏è",  roman:"Bing", han:"‰∏ôÁÅ´", ko:"Î≥ëÌôî" };
        case 4:  return { element:"Fire(Candle)",     emoji:"üïØÔ∏è", roman:"Ding", han:"‰∏ÅÁÅ´", ko:"Ï†ïÌôî" };
        case 5:  return { element:"Earth(Soil)",      emoji:"‚õ∞Ô∏è",  roman:"Wu",   han:"ÊàäÂúü", ko:"Î¨¥ÌÜ†" };
        case 6:  return { element:"Earth(Farmland)",  emoji:"üåæ",  roman:"Ji",   han:"Â∑±Âúü", ko:"Í∏∞ÌÜ†" };
        case 7:  return { element:"Metal(Steel)",     emoji:"‚öîÔ∏è",  roman:"Geng", han:"Â∫öÈáë", ko:"Í≤ΩÍ∏à" };
        case 8:  return { element:"Metal(Jewel)",     emoji:"üíé",  roman:"Xin",  han:"ËæõÈáë", ko:"Ïã†Í∏à" };
        case 9:  return { element:"Water(Ocean)",     emoji:"üåä",  roman:"Ren",  han:"Â£¨Ê∞¥", ko:"ÏûÑÏàò" };
        case 10: return { element:"Water(Rain)",      emoji:"üåßÔ∏è", roman:"Gui",  han:"Áô∏Ê∞¥", ko:"Í≥ÑÏàò" };
        default: return { element:"", emoji:"", roman:"", han:"", ko:"" };
      }
    }

    // Expanded 10 traits + recommended careers
    const DAYMASTER_TRAITS = {
      1: {
        subtitle: "Big tree energy: upright, protective, and built for long-term growth.",
        strengths: [
          "Strong principles; values fairness and responsibility",
          "Protective leadership; naturally supports others",
          "Long-term planner; good at building foundations",
          "Resilient under pressure; steady commitment",
          "Clear direction; good at setting boundaries and structure"
        ],
        watchouts: [
          "Can be stubborn or rigid when challenged",
          "May push forward even when the timing isn‚Äôt right",
          "Dislikes being controlled; clashes with authority easily",
          "Can ignore small details while focusing on the big picture",
          "Under stress: becomes blunt, inflexible, or emotionally distant"
        ],
        tips: [
          "Practice flexibility: allow small adjustments without feeling ‚Äúdefeated‚Äù",
          "Break big goals into weekly checkpoints (not just one huge target)",
          "Delegate‚Äîdon‚Äôt carry everything alone",
          "When blocked, change strategy instead of forcing the same route",
          "Add recovery routines (sleep, stretching, walking) to avoid ‚Äúhardening‚Äù"
        ],
        careers: [
          "Leadership / Management",
          "Project or Operations Management",
          "Architecture / Urban planning",
          "Law / Policy / Public administration",
          "Education / Mentoring",
          "Nonprofit / Community leadership",
          "Construction / Real estate (planning side)"
        ]
      },

      2: {
        subtitle: "Grass & vines: flexible, sensitive, and great at connecting people.",
        strengths: [
          "Adaptable; finds a way around obstacles",
          "Strong social intuition; good at reading the room",
          "Supportive collaborator; builds networks naturally",
          "Creative problem-solver; works well with limited resources",
          "Learns fast by observing and copying best practices"
        ],
        watchouts: [
          "People-pleasing; struggles to say ‚Äúno‚Äù",
          "Easily influenced by environment and mood",
          "Indecisive when too many options exist",
          "Avoids direct conflict; may become passive-aggressive",
          "Under stress: overthinks relationships and second-guesses choices"
        ],
        tips: [
          "Set one clear priority for the day (and protect it)",
          "Use decision rules: ‚ÄòIf it‚Äôs 70% good, choose it‚Äô",
          "Practice honest boundaries: kind but direct",
          "Change environments when stuck (walk, new place, new input)",
          "Track progress weekly to avoid drifting"
        ],
        careers: [
          "Design / Creative roles",
          "Writing / Content / Copy",
          "HR / People operations",
          "Community manager / Partnership",
          "Marketing (relationship-driven)",
          "Counseling / Coaching (support-focused)",
          "Customer success / Client relations"
        ]
      },

      3: {
        subtitle: "Sun: bright, bold, and visible‚Äînaturally energizes the room.",
        strengths: [
          "Charismatic and expressive; inspires others quickly",
          "Fast starter; strong momentum and confidence",
          "Big-picture thinking; sees possibilities",
          "Warm leadership; good at motivating teams",
          "Optimistic under pressure; rebounds quickly"
        ],
        watchouts: [
          "Burnout from overcommitting and moving too fast",
          "Can be blunt; words may come out too strong",
          "Starts many things but may struggle to finish",
          "Needs attention/feedback; gets impatient without response",
          "Under stress: becomes dramatic, impulsive, or scattered"
        ],
        tips: [
          "Schedule rest like a real appointment (non-negotiable)",
          "Finish one task before starting a new one (one-in/one-out rule)",
          "Use simple checklists to secure follow-through",
          "Before speaking, ask: ‚ÄòWill this help or heat up the room?‚Äô",
          "Pace yourself: short sprints + planned cooldown"
        ],
        careers: [
          "Public speaking / MC / Host",
          "PR / Brand / Marketing",
          "Sales / Business development",
          "Entrepreneur / Startup roles",
          "Teaching (performance-based)",
          "Entertainment / Media",
          "Event planning / Producing"
        ]
      },

      4: {
        subtitle: "Candle: warm, focused, and refined‚Äîgood at guiding with subtlety.",
        strengths: [
          "Sharp intuition; senses hidden feelings and context",
          "Focused attention; good at details and finishing touches",
          "Natural mentor/teacher; explains gently and clearly",
          "Creates emotional warmth; builds trust quickly",
          "Refined taste; strong sense of meaning and mood"
        ],
        watchouts: [
          "Sensitive to criticism; confidence fluctuates",
          "Overthinks emotions; can get stuck in rumination",
          "May dim self-expression to avoid conflict",
          "Energy can drop suddenly (mood-based productivity)",
          "Under stress: withdraws, becomes anxious, or silently resentful"
        ],
        tips: [
          "Protect your flame: sleep, regular meals, and quiet time",
          "Name your needs directly (small honest sentences work best)",
          "Use ‚Äòone scene at a time‚Äô thinking to avoid overwhelm",
          "Limit overanalysis: set a timer for thinking/reflecting",
          "Keep a small creative habit to stabilize confidence"
        ],
        careers: [
          "Editing / Proofreading",
          "Therapy / Counseling (gentle guidance)",
          "UX writing / Content design",
          "Curating / Exhibition / Cultural work",
          "Teaching / Tutoring (one-on-one)",
          "Craft / Art / Photography",
          "Research (detail-sensitive)"
        ]
      },

      5: {
        subtitle: "Mountain: stable and dependable‚Äîbuilt to carry responsibility and structure.",
        strengths: [
          "Reliable leadership; steady in crises",
          "Good at building systems and maintaining order",
          "Strong endurance; doesn‚Äôt quit easily",
          "Protective and loyal; people trust you",
          "Practical judgment; sees what is realistic"
        ],
        watchouts: [
          "Resists change; can become too conservative",
          "May hold control tightly when worried",
          "Carries burdens silently; stress accumulates",
          "Can be emotionally heavy or pessimistic under pressure",
          "Under stress: stubborn, defensive, or unresponsive"
        ],
        tips: [
          "Try ‚Äòsmall experiments‚Äô instead of one big risky change",
          "Delegate earlier‚Äîdon‚Äôt wait until you‚Äôre exhausted",
          "Move daily (walks, stretching) to release stuck tension",
          "Write worries down, then turn them into next actions",
          "Practice flexibility: adjust plan, not your values"
        ],
        careers: [
          "Engineering / Construction management",
          "Operations / Logistics",
          "Government / Administration",
          "Real estate / Infrastructure",
          "Project management (large scope)",
          "Risk management / Compliance",
          "Supply chain / Planning"
        ]
      },

      6: {
        subtitle: "Farmland: nurturing, practical care‚Äîgreat at growing results step by step.",
        strengths: [
          "Supportive and service-minded; strong caretaking instinct",
          "Good at organizing resources and routines",
          "Patient builder; improves things steadily",
          "Practical empathy; helps in realistic ways",
          "Skilled at maintaining harmony and daily life systems"
        ],
        watchouts: [
          "Over-caretaking; takes on others‚Äô problems",
          "Worry loops; over-prepares and delays action",
          "Can undervalue self; waits for reassurance",
          "Difficulty setting boundaries with needy people",
          "Under stress: procrastination, guilt, and mental clutter"
        ],
        tips: [
          "Set ‚Äòhelping limits‚Äô: time, money, emotional capacity",
          "Start before perfect‚Äîdo a 10-minute first step",
          "Keep your space and schedule simple (less clutter, less worry)",
          "Use a daily ‚Äòtop 3‚Äô list to prevent overplanning",
          "Practice saying ‚Äòno‚Äô kindly and consistently"
        ],
        careers: [
          "Healthcare / Nursing / Care work",
          "Education (support & routine-based)",
          "Accounting / Administration",
          "Operations support / Coordinator",
          "Nutrition / Wellness (practical care)",
          "Customer success / Service roles",
          "Agriculture / Food-related work"
        ]
      },

      7: {
        subtitle: "Steel: decisive and powerful‚Äîcuts through confusion and acts fast.",
        strengths: [
          "Brave and action-oriented; strong drive",
          "Direct honesty; clear standards",
          "Strong crisis management; handles pressure well",
          "Protective fighter energy; stands up for people",
          "Fast decision-maker; doesn‚Äôt hesitate too long"
        ],
        watchouts: [
          "Too harsh; words can wound",
          "Impatient with slow progress or emotions",
          "Conflict-prone when feeling blocked",
          "All-or-nothing thinking; can overreact",
          "Under stress: aggressive, rigid, or reckless"
        ],
        tips: [
          "Pause 10 seconds before reacting (especially in conflict)",
          "Aim for ‚Äòfirm but kind‚Äô language",
          "Channel intensity into workouts or structured goals",
          "Check consequences: ‚ÄòWhat happens after I win this fight?‚Äô",
          "Build recovery time after pushing hard"
        ],
        careers: [
          "Emergency / Crisis response",
          "Military / Police / Security",
          "Surgery / High-stakes medical",
          "Athletics / Coaching",
          "Engineering (hard systems)",
          "Litigation / Prosecutor-style law",
          "Turnaround / Fixer roles"
        ]
      },

      8: {
        subtitle: "Jewel: refined taste and precision‚Äîexcellent at polishing and completing.",
        strengths: [
          "High standards; strong quality control",
          "Great eye for details, design, and editing",
          "Good at finishing and refining outcomes",
          "Values integrity; strong sense of what‚Äôs right",
          "Elegant communication when confident"
        ],
        watchouts: [
          "Perfectionism slows action",
          "Self-criticism; confidence can be fragile",
          "Can seem cold or distant when focused",
          "Gets stuck comparing self to others",
          "Under stress: avoids starting, over-edits, or withdraws"
        ],
        tips: [
          "Ship version 1, then improve (two-step approach)",
          "Use deadlines to stop endless polishing",
          "Track progress, not perfection",
          "Balance critique with appreciation (1:1 rule‚Äîone praise per critique)",
          "Warm up socially before important conversations"
        ],
        careers: [
          "Design / Styling / Art direction",
          "Quality assurance / Testing",
          "Branding / Luxury / Craft",
          "Editing / Publishing",
          "Auditing / Compliance (detail)",
          "Data analysis (precision work)",
          "Product refinement / QA roles"
        ]
      },

      9: {
        subtitle: "Ocean: big mind and deep curiosity‚Äîadaptable, strategic, and expansive.",
        strengths: [
          "Strong learning ability; loves research and exploration",
          "Strategic thinking; sees patterns and hidden connections",
          "Adaptable in uncertainty; handles change well",
          "Creative storyteller; good at big concepts",
          "Naturally resourceful; finds options others miss"
        ],
        watchouts: [
          "Overthinking; mind doesn‚Äôt shut off",
          "Drifting/procrastination when structure is missing",
          "Avoids direct conflict; keeps feelings inside",
          "Scattered focus; too many interests at once",
          "Under stress: anxiety, indecision, and escape behaviors"
        ],
        tips: [
          "Time-box decisions (e.g., 15 minutes, then choose)",
          "Write a simple 3-step plan and execute step 1 today",
          "Reduce options: one project per season (not ten at once)",
          "Talk it out with a trusted person instead of carrying it alone",
          "Use movement + sunlight to reset mental loops"
        ],
        careers: [
          "Strategy / Consulting",
          "Research / Journalism / Investigation",
          "Product management (big-picture)",
          "Film / Documentary / Storytelling",
          "Business development (exploration)",
          "Travel / Field work / Exploration",
          "Systems thinking roles"
        ]
      },

      10: {
        subtitle: "Rain: subtle intuition and quiet persistence‚Äîresponds deeply to people and context.",
        strengths: [
          "Sensitive intuition; notices small signals",
          "Good listener and mediator; supports quietly",
          "Consistent, persistent effort over time",
          "Strong memory for details and emotions",
          "Works well behind the scenes; careful and thoughtful"
        ],
        watchouts: [
          "Absorbs others‚Äô moods; emotional boundaries get thin",
          "Anxiety spirals; fear grows when uncertain",
          "Too passive; waits instead of initiating",
          "Avoids confrontation; problems linger",
          "Under stress: rumination, withdrawal, and low energy"
        ],
        tips: [
          "Protect boundaries: limit exposure to draining people/content",
          "Do one small action daily (momentum beats mood)",
          "Use grounding: breathing, walking, warm shower, journaling",
          "Ask directly for what you need (short, clear requests)",
          "Build a stable routine to prevent emotional flooding"
        ],
        careers: [
          "Counseling / Psychology",
          "UX research / User interviews",
          "Translation / Interpretation",
          "Writing (quiet, reflective)",
          "Data / Insight analysis",
          "Library / Archive / Knowledge work",
          "Mediation / Support roles"
        ]
      }
    };

    function toInt(v){ return Number(String(v).trim()); }

    function isValidDate(y, m, d){
      if (!Number.isInteger(y) || !Number.isInteger(m) || !Number.isInteger(d)) return false;
      if (y < 1800 || y > 2200) return false;
      if (m < 1 || m > 12) return false;
      if (d < 1 || d > 31) return false;
      const dt = new Date(Date.UTC(y, m - 1, d));
      return dt.getUTCFullYear() === y && (dt.getUTCMonth() + 1) === m && dt.getUTCDate() === d;
    }

    const birthYear = document.getElementById("birthYear");
    const birthMonth = document.getElementById("birthMonth");
    const birthDay = document.getElementById("birthDay");
    const out = document.getElementById("out");
    const calcBtn = document.getElementById("calcBtn");
    const resetBtn = document.getElementById("resetBtn");

    function showError(msg){
      out.classList.add("error");
      out.style.display = "block";
      out.innerHTML = `<div style="color:var(--err);font-weight:950;">${msg}</div>`;
    }

    function showResult(html){
      out.classList.remove("error");
      out.style.display = "block";
      out.innerHTML = html;
    }

    function listHTML(arr){
      return `<ul>${arr.map(x => `<li>${x}</li>`).join("")}</ul>`;
    }

    function calculate(){
      try{
        out.style.display = "none";
        out.innerHTML = "";
        out.classList.remove("error");

        const y = toInt(birthYear.value);
        const m = toInt(birthMonth.value);
        const d = toInt(birthDay.value);

        if (!birthYear.value || !birthMonth.value || !birthDay.value){
          showError("Please enter Year, Month, and Day.");
          return;
        }
        if (!isValidDate(y, m, d)){
          showError("Invalid date. Please check Year / Month / Day.");
          return;
        }

        const day = dayPillarFromDate(y, m, d);
        const dm = dayMasterInfo(day.stemIndex);
        const t = DAYMASTER_TRAITS[day.stemIndex];
        const dayStem = STEMS[day.stemIndex - 1];

        showResult(`
          <div class="topline">
            <div>
              <p class="big">${dm.emoji} ${dm.element}</p>
              <div class="mini"><span class="mono">${dm.roman}</span> (<span class="mono">${dm.han}</span> ¬∑ ${dm.ko})</div>
              <div class="mini" style="margin-top:10px;">${t.subtitle}</div>
            </div>
            <span class="pill">Day Stem: <span class="mono">${dayStem}</span></span>
          </div>

          <div class="traits">
            <div class="box">
              <h3>Strengths</h3>
              ${listHTML(t.strengths)}
            </div>
            <div class="box">
              <h3>Watch-outs</h3>
              ${listHTML(t.watchouts)}
            </div>
            <div class="box" style="grid-column: 1 / -1;">
              <h3>Simple tips</h3>
              ${listHTML(t.tips)}
            </div>
            <div class="box" style="grid-column: 1 / -1;">
              <h3>Recommended careers</h3>
              ${listHTML(t.careers)}
            </div>
          </div>
        `);
      }catch(e){
        showError("Calculation failed. (Open console for details)");
        console.error(e);
      }
    }

    function resetAll(){
      birthYear.value = "";
      birthMonth.value = "";
      birthDay.value = "";
      out.style.display = "none";
      out.innerHTML = "";
      out.classList.remove("error");
    }

    function digitsOnly(el, maxLen){
      el.addEventListener("input", () => {
        el.value = el.value.replace(/\D/g, "").slice(0, maxLen);
      });
    }

    digitsOnly(birthYear, 4);
    digitsOnly(birthMonth, 2);
    digitsOnly(birthDay, 2);

    // Button-only (no auto-calc)
    calcBtn.addEventListener("click", calculate);
    resetBtn.addEventListener("click", resetAll);

    // Enter key triggers search
    [birthYear, birthMonth, birthDay].forEach(el => {
      el.addEventListener("keydown", (e) => { if (e.key === "Enter") calculate(); });
    });

    setStatusOk();
  } catch (e) {
    setStatusErr(e);
  }
})();
</script>
</body>
</html>
