<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Day Master Traits Finder</title>
  <meta name="theme-color" content="#0b0c10" />
  <meta name="apple-mobile-web-app-capable" content="yes" />

  <style>
    :root{
      --bg:#0b0c10;
      --line:#2a2f4a;
      --text:#eaf0ff;
      --muted:#b8c4ff;
      --muted2:#94a3d6;
      --btn:#1b2140;
      --btn2:#10142a;
      --focus:#7aa2ff;
      --radius:18px;
      --ok:#72ffb0;
      --err:#ff8a8a;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 600px at 10% 0%, #121a3a 0%, transparent 55%),
        radial-gradient(1000px 500px at 90% 10%, #1b1340 0%, transparent 60%),
        var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Sans", "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }
    .wrap{ max-width: 920px; margin: 0 auto; padding: 18px 16px 28px; }
    .header{ display:flex; flex-direction: column; gap: 8px; margin: 10px 0 14px; }
    .title{
      font-size: clamp(22px, 5vw, 32px);
      font-weight: 950;
      letter-spacing: .2px;
      line-height: 1.1;
      margin:0;
      display:flex;
      align-items:baseline;
      gap:12px;
      flex-wrap:wrap;
    }
    .status{
      font-size: 12px;
      color: var(--muted2);
      font-weight: 850;
      border:1px solid var(--line);
      border-radius: 999px;
      padding: 6px 10px;
      background: rgba(0,0,0,.18);
    }
    .status.ok{ color: var(--ok); border-color: rgba(114,255,176,.35); }
    .subtitle{
      margin:0;
      color: var(--muted);
      line-height: 1.45;
      font-size: 14px;
    }

    .card{
      background: rgba(18,20,32,.92);
      border: 1px solid rgba(42,47,74,.75);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: 0 18px 45px rgba(0,0,0,.32);
      backdrop-filter: blur(6px);
    }

    .grid{ display:grid; gap: 12px; grid-template-columns: 1fr; }
    .grid.three{ grid-template-columns: 1.2fr 1fr 1fr; }
    @media (max-width: 520px){
      .grid.three{ grid-template-columns: 1fr; }
    }

    label{ display:block; font-size: 13px; color: var(--muted); margin: 2px 0 8px; }
    input[type="text"]{
      width:100%;
      padding: 14px 14px;
      border-radius: 14px;
      border: 1px solid rgba(42,47,74,.9);
      background: var(--btn2);
      color: var(--text);
      font-size: 16px;
      outline: none;
    }
    input[type="text"]:focus{
      border-color: var(--focus);
      box-shadow: 0 0 0 3px rgba(122,162,255,.20);
    }

    .actions{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 12px;
    }
    button{
      width:100%;
      padding: 14px 14px;
      border-radius: 14px;
      border: 1px solid rgba(42,47,74,.9);
      background: var(--btn);
      color: var(--text);
      font-size: 16px;
      font-weight: 950;
      cursor:pointer;
      touch-action: manipulation;
    }
    button.secondary{
      background: rgba(16,20,42,.55);
      font-weight: 850;
      color: var(--muted);
    }
    button:active{ transform: translateY(1px); }

    .result{
      margin-top: 14px;
      padding: 16px;
      border-radius: var(--radius);
      border: 1px dashed rgba(42,47,74,.9);
      background: rgba(16,20,42,.55);
      display:none;
    }
    .result.error{
      border-style: solid;
      border-color: rgba(255,138,138,.45);
      background: rgba(255,138,138,.08);
    }

    .topline{
      display:flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items:flex-start;
      justify-content: space-between;
    }
    .big{
      font-size: clamp(22px, 6vw, 36px);
      font-weight: 980;
      letter-spacing: .2px;
      margin:0;
      line-height: 1.05;
    }
    .mini{
      margin: 10px 0 0;
      font-size: 14px;
      color: var(--muted);
      font-weight: 850;
      line-height: 1.35;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 7px 11px;
      border-radius: 999px;
      border: 1px solid rgba(42,47,74,.9);
      background: rgba(0,0,0,.18);
      color: var(--muted);
      font-size: 13px;
      font-weight: 900;
      white-space: nowrap;
    }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; color: var(--text); }

    .traits{
      margin-top: 14px;
      display:grid;
      gap: 10px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 760px){
      .traits{ grid-template-columns: 1fr 1fr; }
    }
    .box{
      border: 1px solid rgba(42,47,74,.7);
      background: rgba(0,0,0,.14);
      border-radius: 14px;
      padding: 12px;
    }
    .box h3{
      margin:0 0 8px;
      font-size: 14px;
      letter-spacing:.2px;
      color: var(--muted);
      font-weight: 950;
    }
    ul{ margin:0; padding-left: 18px; }
    li{ margin: 6px 0; color: var(--text); }
    .note{
      margin-top: 12px;
      font-size: 12px;
      color: var(--muted2);
      line-height: 1.35;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="header">
      <h1 class="title">
        Day Master Traits Finder
        <span id="status" class="status">Status: Loading‚Ä¶</span>
      </h1>

      <p class="subtitle">
        Enter your birth date to find your Day Master (10 types) and its traits.
      </p>
    </div>

    <div class="card">
      <div class="grid three">
        <div>
          <label for="birthYear">Year</label>
          <input id="birthYear" type="text" inputmode="numeric" autocomplete="bday-year" placeholder="YYYY" />
        </div>
        <div>
          <label for="birthMonth">Month</label>
          <input id="birthMonth" type="text" inputmode="numeric" autocomplete="bday-month" placeholder="MM" />
        </div>
        <div>
          <label for="birthDay">Day</label>
          <input id="birthDay" type="text" inputmode="numeric" autocomplete="bday-day" placeholder="DD" />
        </div>
      </div>

      <div class="actions">
        <button id="calcBtn" type="button">Search</button>
        <button id="resetBtn" class="secondary" type="button">Reset</button>
      </div>

      <div id="out" class="result"></div>

      <div class="note">
        Presentation-friendly summary (date only).
      </div>
    </div>
  </div>

<script>
(() => {
  const statusEl = document.getElementById("status");

  function setStatusOk(){
    statusEl.textContent = "Status: Ready";
    statusEl.classList.add("ok");
  }
  function setStatusErr(msg){
    statusEl.textContent = "Status: Error";
    statusEl.classList.remove("ok");
    console.error(msg);
  }

  try {
    const STEMS = ["Áî≤","‰πô","‰∏ô","‰∏Å","Êàä","Â∑±","Â∫ö","Ëæõ","Â£¨","Áô∏"];
    const BRANCHES = ["Â≠ê","‰∏ë","ÂØÖ","ÂçØ","Ëæ∞","Â∑≥","Âçà","Êú™","Áî≥","ÈÖâ","Êàå","‰∫•"];

    function mod(n, m){ return ((n % m) + m) % m; }

    // Gregorian date -> Julian Day Number at noon (integer)
    function jdnNoon(y, m, d){
      const a = Math.floor((14 - m) / 12);
      const y2 = y + 4800 - a;
      const m2 = m + 12 * a - 3;
      return d
        + Math.floor((153 * m2 + 2) / 5)
        + 365 * y2
        + Math.floor(y2 / 4)
        - Math.floor(y2 / 100)
        + Math.floor(y2 / 400)
        - 32045;
    }

    // T = 1 + mod(JD_noon - 1, 10)
    // B = 1 + mod(JD_noon + 1, 12)
    function dayPillarFromDate(y, m, d){
      const jd = jdnNoon(y, m, d);
      const T = 1 + mod(jd - 1, 10);
      const B = 1 + mod(jd + 1, 12);
      return { jd, stemIndex: T, branchIndex: B, pillar: STEMS[T-1] + BRANCHES[B-1] };
    }

    // ‚úÖ updated emojis & labels
    function dayMasterInfo(T){
      switch (T){
        case 1:  return { element:"Wood(Tree)",       emoji:"üå≥",  roman:"Jia",  han:"Áî≤Êú®", ko:"Í∞ëÎ™©" };
        case 2:  return { element:"Wood(Grass)",      emoji:"üåø",  roman:"Yi",   han:"‰πôÊú®", ko:"ÏùÑÎ™©" };
        case 3:  return { element:"Fire(Sun)",        emoji:"‚òÄÔ∏è",  roman:"Bing", han:"‰∏ôÁÅ´", ko:"Î≥ëÌôî" };
        case 4:  return { element:"Fire(Candle)",     emoji:"üïØÔ∏è", roman:"Ding", han:"‰∏ÅÁÅ´", ko:"Ï†ïÌôî" };
        case 5:  return { element:"Earth(Soil)",      emoji:"‚õ∞Ô∏è",  roman:"Wu",   han:"ÊàäÂúü", ko:"Î¨¥ÌÜ†" };
        case 6:  return { element:"Earth(Farmland)",  emoji:"üåæ",  roman:"Ji",   han:"Â∑±Âúü", ko:"Í∏∞ÌÜ†" };
        case 7:  return { element:"Metal(Steel)",     emoji:"‚öîÔ∏è",  roman:"Geng", han:"Â∫öÈáë", ko:"Í≤ΩÍ∏à" };
        case 8:  return { element:"Metal(Jewel)",     emoji:"üíé",  roman:"Xin",  han:"ËæõÈáë", ko:"Ïã†Í∏à" };
        case 9:  return { element:"Water(Ocean)",     emoji:"üåä",  roman:"Ren",  han:"Â£¨Ê∞¥", ko:"ÏûÑÏàò" };
        case 10: return { element:"Water(Rain)",      emoji:"üåßÔ∏è", roman:"Gui",  han:"Áô∏Ê∞¥", ko:"Í≥ÑÏàò" };
        default: return { element:"", emoji:"", roman:"", han:"", ko:"" };
      }
    }

    // 10 traits (one per Day Master)
    const DAYMASTER_TRAITS = {
      1: { title:"Jia (Áî≤Êú®) ‚Äî Wood(Tree)", subtitle:"Big tree energy: upright and protective.",
           strengths:["Strong principles, fair-minded", "Protective leadership", "Long-term thinker"],
           watchouts:["Stubborn when challenged", "Gets rigid under stress", "May ignore small details"],
           tips:["Practice flexibility: allow small compromises", "Delegate, don‚Äôt carry everything", "Build routines, not just big goals"]
      },
      2: { title:"Yi (‰πôÊú®) ‚Äî Wood(Grass)", subtitle:"Grass & vines: adaptable and sensitive.",
           strengths:["Flexible, social intelligence", "Good at networking and supporting", "Creative problem solver"],
           watchouts:["People-pleasing", "Easily affected by environment", "Indecisive when options are many"],
           tips:["Set clear boundaries", "Decide with a time limit", "Choose one priority per day"]
      },
      3: { title:"Bing (‰∏ôÁÅ´) ‚Äî Fire(Sun)", subtitle:"Sun: bright, bold, and visible.",
           strengths:["Charismatic, expressive", "Fast starter, energizes others", "Big-picture confidence"],
           watchouts:["Burnout from overdoing", "Can be blunt or too direct", "Starts a lot, finishes less"],
           tips:["Schedule rest like a task", "Finish one thing before adding more", "Use checklists to land the ending"]
      },
      4: { title:"Ding (‰∏ÅÁÅ´) ‚Äî Fire(Candle)", subtitle:"Candle: warm, focused, and refined.",
           strengths:["Insightful, precise expression", "Good at teaching / guiding", "Creates cozy atmosphere"],
           watchouts:["Over-sensitive to criticism", "Overthinking emotions", "Can dim self to avoid conflict"],
           tips:["Name your needs clearly", "Protect your energy (sleep/food)", "Practice small courageous actions"]
      },
      5: { title:"Wu (ÊàäÂúü) ‚Äî Earth(Soil)", subtitle:"Mountain: stable and dependable.",
           strengths:["Reliable, grounded leadership", "Good at building systems", "Calm in crisis"],
           watchouts:["Resists change too long", "Can become controlling", "Emotional heaviness / worry"],
           tips:["Try ‚Äòsmall change experiments‚Äô", "Ask for help earlier", "Move daily to release stuck energy"]
      },
      6: { title:"Ji (Â∑±Âúü) ‚Äî Earth(Farmland)", subtitle:"Field: nurturing, practical care.",
           strengths:["Supportive, service-minded", "Organizes resources well", "Patient with people"],
           watchouts:["Takes on others‚Äô burdens", "Over-prepares, delays action", "Needs reassurance"],
           tips:["Set ‚Äòhelping limits‚Äô", "Start before you feel ready", "Keep your space and schedule simple"]
      },
      7: { title:"Geng (Â∫öÈáë) ‚Äî Metal(Steel)", subtitle:"Steel: decisive and strong-cutting.",
           strengths:["Brave, action-oriented", "Cuts through confusion", "Strong willpower"],
           watchouts:["Too harsh or impatient", "Conflict-prone", "All-or-nothing mindset"],
           tips:["Pause 10 seconds before reacting", "Aim for ‚Äòfirm but kind‚Äô words", "Add recovery time after intense pushes"]
      },
      8: { title:"Xin (ËæõÈáë) ‚Äî Metal(Jewel)", subtitle:"Jewel: refined standards and taste.",
           strengths:["High quality, detail-focused", "Good at editing/finishing", "Strong sense of values"],
           watchouts:["Perfectionism", "Self-criticism", "Can seem distant"],
           tips:["Ship version 1, then improve", "Use deadlines to prevent over-polish", "Balance critique with appreciation"]
      },
      9: { title:"Ren (Â£¨Ê∞¥) ‚Äî Water(Ocean)", subtitle:"Ocean: big mind, deep thinking.",
           strengths:["Strategic, curious, research power", "Adaptable in uncertainty", "Sees patterns"],
           watchouts:["Overthinking, drifting", "Avoids confrontation", "Energy scattered"],
           tips:["Write a 3-step plan", "Decide with time limits", "Talk it out instead of holding it in"]
      },
      10:{ title:"Gui (Áô∏Ê∞¥) ‚Äî Water(Rain)", subtitle:"Rain: subtle, intuitive, and responsive.",
           strengths:["Sensitive intuition", "Good listener and mediator", "Quiet persistence"],
           watchouts:["Anxiety spirals", "Too passive", "Absorbs others‚Äô moods"],
           tips:["Protect your emotional boundaries", "Do one small action daily", "Get sunlight + movement to reset"]
      }
    };

    function toInt(v){ return Number(String(v).trim()); }

    function isValidDate(y, m, d){
      if (!Number.isInteger(y) || !Number.isInteger(m) || !Number.isInteger(d)) return false;
      if (y < 1800 || y > 2200) return false;
      if (m < 1 || m > 12) return false;
      if (d < 1 || d > 31) return false;
      const dt = new Date(Date.UTC(y, m - 1, d));
      return dt.getUTCFullYear() === y && (dt.getUTCMonth() + 1) === m && dt.getUTCDate() === d;
    }

    const birthYear = document.getElementById("birthYear");
    const birthMonth = document.getElementById("birthMonth");
    const birthDay = document.getElementById("birthDay");
    const out = document.getElementById("out");
    const calcBtn = document.getElementById("calcBtn");
    const resetBtn = document.getElementById("resetBtn");

    function showError(msg){
      out.classList.add("error");
      out.style.display = "block";
      out.innerHTML = `<div style="color:var(--err);font-weight:950;">${msg}</div>`;
    }

    function showResult(html){
      out.classList.remove("error");
      out.style.display = "block";
      out.innerHTML = html;
    }

    function listHTML(arr){
      return `<ul>${arr.map(x => `<li>${x}</li>`).join("")}</ul>`;
    }

    function calculate(){
      try{
        out.style.display = "none";
        out.innerHTML = "";
        out.classList.remove("error");

        const y = toInt(birthYear.value);
        const m = toInt(birthMonth.value);
        const d = toInt(birthDay.value);

        if (!birthYear.value || !birthMonth.value || !birthDay.value){
          showError("Please enter Year, Month, and Day.");
          return;
        }
        if (!isValidDate(y, m, d)){
          showError("Invalid date. Please check Year / Month / Day.");
          return;
        }

        const day = dayPillarFromDate(y, m, d);
        const dm = dayMasterInfo(day.stemIndex);
        const t = DAYMASTER_TRAITS[day.stemIndex];
        const dayStem = STEMS[day.stemIndex - 1];

        showResult(`
          <div class="topline">
            <div>
              <p class="big">${dm.emoji} ${dm.element}</p>
              <div class="mini"><span class="mono">${dm.roman}</span> (<span class="mono">${dm.han}</span> ¬∑ ${dm.ko})</div>
              <div class="mini" style="margin-top:10px;">${t.subtitle}</div>
            </div>
            <span class="pill">Day Stem: <span class="mono">${dayStem}</span></span>
          </div>

          <div class="traits">
            <div class="box">
              <h3>Strengths</h3>
              ${listHTML(t.strengths)}
            </div>
            <div class="box">
              <h3>Watch-outs</h3>
              ${listHTML(t.watchouts)}
            </div>
            <div class="box" style="grid-column: 1 / -1;">
              <h3>Simple tips</h3>
              ${listHTML(t.tips)}
            </div>
          </div>
        `);
      }catch(e){
        showError("Calculation failed. (Open console for details)");
        console.error(e);
      }
    }

    function resetAll(){
      birthYear.value = "";
      birthMonth.value = "";
      birthDay.value = "";
      out.style.display = "none";
      out.innerHTML = "";
      out.classList.remove("error");
    }

    function digitsOnly(el, maxLen){
      el.addEventListener("input", () => {
        el.value = el.value.replace(/\D/g, "").slice(0, maxLen);
      });
    }

    digitsOnly(birthYear, 4);
    digitsOnly(birthMonth, 2);
    digitsOnly(birthDay, 2);

    calcBtn.addEventListener("click", calculate);
    resetBtn.addEventListener("click", resetAll);

    [birthYear, birthMonth, birthDay].forEach(el => {
      el.addEventListener("keydown", (e) => { if (e.key === "Enter") calculate(); });
    });

    setStatusOk();
  } catch (e) {
    setStatusErr(e);
  }
})();
</script>
</body>
</html>
